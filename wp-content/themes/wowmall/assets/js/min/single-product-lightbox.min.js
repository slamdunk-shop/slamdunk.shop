(function(d){var a;if("undefined"!==typeof singleProductLightbox&&"undefined"!==typeof singleProductLightbox.thumbs&&0!==singleProductLightbox.thumbs.length){a=singleProductLightbox.thumbs[0]}function c(){var f,g=[];d(".wowmall-product-video").off("click");d('a[data-rel=prettyPhoto][href],a[data-rel="prettyPhoto[product-gallery]"][href]').each(function(h,k){var j=d(this);g.push({src:j.attr("href"),type:"image"});j.off("click").on("click",function(i){i.preventDefault();d.magnificPopup.open({items:g,tLoading:wowmallParams.preloader,fixedContentPos:true,mainClass:"wowmall-single-product-lightbox mfp-fade mfp-with-zoom",closeMarkup:'<button title="%title%" type="button" class="mfp-close"></button>',image:{tError:'<a href="%url%">The image #%curr%</a> could not be loaded.',markup:'<div class="mfp-figure"><div class="mfp-close"></div><figure><div class="mfp-img"></div><figcaption></figcaption></figure></div>'},iframe:{markup:'<button type="button" class="mfp-close"></button><div class="mfp-iframe-scaler"><iframe class="mfp-iframe" frameborder="0" allowfullscreen></iframe></div>',patterns:{youtu:{index:"youtu.be",id:function(n){var l=n.match(/^.+youtu.be\/([^?]+)/);if(null!==l){return l[1]}return null},src:"//www.youtube.com/embed/%id%?autoplay=1&rel=0"}}},callbacks:{open:function(){var m=this;if(!d("body").hasClass("mobile")){if("undefined"!==typeof singleProductLightbox&&"undefined"!==typeof singleProductLightbox.thumbs&&0!==singleProductLightbox.thumbs.length){if(!(d("#gallery-thumbs .wowmall-product-video").length||d(".wowmall-product-video-frame").length)&&2>singleProductLightbox.thumbs.length){return}var n=this.index;d(this.container).append('<div class="mfp-thumbs mfp-prevent-close"><div class="swiper-container mfp-prevent-close" id=mfp-swiper><div class="swiper-wrapper mfp-prevent-close"></div><div class="swiper-scrollbar mfp-prevent-close"></div></div>');var l=d(this.container).find(".mfp-thumbs"),o=l.find(".swiper-wrapper");singleProductLightbox.thumbs.forEach(function(r,q,p){o.append('<div class="swiper-slide mfp-prevent-close"><img src="'+r[0]+'" alt="" width='+r[1]+" height="+r[2]+" class=mfp-prevent-close></div>")});if(d("#gallery-thumbs .wowmall-product-video").length||d(".wowmall-product-video-frame").length){l.find(".swiper-slide:last").after('<div class="swiper-slide mfp-prevent-close"><div class="mfp-slide-video mfp-prevent-close"></div>')}f=new Swiper(l.find("#mfp-swiper"),{initialSlide:n,grabCursor:false,slidesPerView:"auto",scrollbar:".swiper-scrollbar",scrollbarHide:false,scrollbarDraggable:true,scrollbarSnapOnRelease:true,centeredSlides:true,onImagesReady:function(p){d(p.scrollbar.drag).addClass("mfp-prevent-close");e(n,p)}});d(f.slides).click(function(){m.goTo(d(this).index());e(d(this).index(),f)})}return}d(".mfp-container").swipe({swipeLeft:function(){m.next()},swipeRight:function(){m.prev()}})},change:function(){if("undefined"!==typeof f){var l=this.index;e(l,f)}}},gallery:{enabled:true,navigateByImgClick:true,preload:[0,1]}},h)})});if(d(".wowmall-product-video-frame").length){g.push({src:d(".wowmall-product-video-frame").data("url"),type:"iframe"})}if(d("#gallery-thumbs .wowmall-product-video").length){g.push({src:d("#gallery-thumbs .wowmall-product-video").attr("href"),type:"iframe"});if(1<d("#gallery-thumbs .swiper-slide").length){d(".wowmall-product-video").on("click",function(i){var h=g.length-1;i.preventDefault();d.magnificPopup.open({items:g,tLoading:wowmallParams.preloader,mainClass:"wowmall-single-product-lightbox mfp-fade mfp-with-zoom",closeMarkup:'<button title="%title%" type="button" class="mfp-close"></button>',fixedContentPos:true,image:{tError:'<a href="%url%">The image #%curr%</a> could not be loaded.',markup:'<div class="mfp-figure"><div class="mfp-close"></div><figure><div class="mfp-img"></div><figcaption></figcaption></figure></div>'},iframe:{markup:'<button type="button" class="mfp-close"></button><div class="mfp-iframe-scaler"><iframe class="mfp-iframe" frameborder="0" allowfullscreen></iframe></div>',patterns:{youtu:{index:"youtu.be",id:function(k){var j=k.match(/^.+youtu.be\/([^?]+)/);if(null!==j){return j[1]}return null},src:"//www.youtube.com/embed/%id%?autoplay=1&rel=0"}}},callbacks:{open:function(){var k=this;if(!d("body").hasClass("mobile")){if("undefined"!==typeof singleProductLightbox&&"undefined"!==typeof singleProductLightbox.thumbs&&0!==singleProductLightbox.thumbs.length){if(!d("#gallery-thumbs .wowmall-product-video").length&&2>singleProductLightbox.thumbs.length){return}var l=this.index;d(this.container).append('<div class="mfp-thumbs mfp-prevent-close"><div class="swiper-container mfp-prevent-close" id=mfp-swiper><div class="swiper-wrapper mfp-prevent-close"></div><div class="swiper-scrollbar mfp-prevent-close"></div></div>');var j=d(this.container).find(".mfp-thumbs"),m=j.find(".swiper-wrapper");singleProductLightbox.thumbs.forEach(function(p,o,n){m.append('<div class="swiper-slide mfp-prevent-close"><img src="'+p[0]+'" alt="" width='+p[1]+" height="+p[2]+" class=mfp-prevent-close></div>")});if(d("#gallery-thumbs .wowmall-product-video").length){j.find(".swiper-slide:last").after('<div class="swiper-slide mfp-prevent-close"><div class="mfp-slide-video mfp-prevent-close"></div>')}f=new Swiper(j.find("#mfp-swiper"),{initialSlide:l,grabCursor:false,slidesPerView:"auto",scrollbar:".swiper-scrollbar",scrollbarHide:false,scrollbarDraggable:true,scrollbarSnapOnRelease:true,centeredSlides:true,onImagesReady:function(n){d(n.scrollbar.drag).addClass("mfp-prevent-close");e(l,n)}});d(f.slides).click(function(){k.goTo(d(this).index());e(d(this).index(),f)})}return}d(".mfp-container").swipe({swipeLeft:function(){k.next()},swipeRight:function(){k.prev()}})},change:function(){if("undefined"!==typeof f){var j=this.index;e(j,f)}}},gallery:{enabled:true,navigateByImgClick:true,preload:[0,1]}},h)})}}if(d("#gallery-thumbs .wowmall-product-video").length&&1===d("#gallery-thumbs .swiper-slide").length){d(".wowmall-product-video").magnificPopup({type:"iframe",tLoading:wowmallParams.preloader,fixedContentPos:true,mainClass:"wowmall-single-product-lightbox mfp-fade mfp-with-zoom",iframe:{markup:'<button type="button" class="mfp-close"></button><div class="mfp-iframe-scaler"><iframe class="mfp-iframe" frameborder="0" allowfullscreen></iframe></div>',patterns:{youtu:{index:"youtu.be",id:function(i){var h=i.match(/^.+youtu.be\/([^?]+)/);if(null!==h){return h[1]}return null},src:"//www.youtube.com/embed/%id%?autoplay=1&rel=0"}}}})}}c();function e(h,g){if(g instanceof Swiper){g.slideTo(h);var f=d(g.slides[h]);d(g.container).find(".swiper-slide").removeClass("swiper-slide-force-active swiper-slide-force-prev swiper-slide-force-next");f.addClass("swiper-slide-force-active");if(0<h){d(g.slides[h-1]).addClass("swiper-slide-force-prev")}if("undefined"!==typeof g.slides[h+1]){d(g.slides[h+1]).addClass("swiper-slide-force-next")}}}d(".variations_form").on("wc_variation_form",function(){d(".variations_form").on("update_variation_values",function(){d(".variations_form").off("found_variation",b).on("found_variation",b)}).trigger("check_variations")}).on("reset_image",function(){if("undefined"!==typeof f&&"undefined"!==typeof f.thumbs&&a&&a!==f.thumbs[0]){f.thumbs[0]=a}if(!a){if("undefined"===typeof f){var f={}}f.thumbs=[]}setTimeout(c,100);d(".variations_form").off("found_variation",b).on("found_variation",b)});function b(g,f){if("undefined"!==typeof f.lightbox_thumb&&"undefined"!==typeof singleProductLightbox&&"undefined"!==typeof singleProductLightbox.thumbs){singleProductLightbox.thumbs[0]=f.lightbox_thumb}if("undefined"!==typeof singleProductLightbox&&"undefined"!==typeof singleProductLightbox.thumbs&&0===singleProductLightbox.thumbs.length&&"undefined"!==typeof f.lightbox_thumb&&d(".wowmall-product-video-frame").length){singleProductLightbox.thumbs[0]=f.lightbox_thumb}c()}})(jQuery);