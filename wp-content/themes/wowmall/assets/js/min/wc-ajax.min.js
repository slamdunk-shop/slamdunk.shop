(function(g){var r=".woocommerce-ordering",a=".wc-grid-list-button",s=".wowmall-wc-ajax-products-wrapper",n=g(a),b="active",q="wowmall-wc-grid-list",i=g(s),e=".woocommerce-pagination a.page-numbers",c="a.wowmall-wc-ajax-load-more-button",d=".wowmall-infinite-preloader",f;g.wowmallWcProductsAjax=function(t){g(document).trigger("animate_svg");if("undefined"===typeof wowmallParams){return}var u=g(s);u.addClass("loading");t.action="wowmall_wc_rebuild_products";g.post(wowmallParams.ajax_url,t,function(v){u.removeClass("loading");if(v.success){u.replaceWith(v.data.products);g(document).trigger("wowmall_wc_products_changed");o()}})};function h(u){var t=g(u.currentTarget);if(t.hasClass(b)){return}n.removeClass(b);t.addClass(b);var w=u.currentTarget.dataset.condition,v={pageUrl:location.href};g.cookie(q,w,{expires:365,path:"/"});g.wowmallWcProductsAjax(v)}g.wowmallWcOrderingHandler=function(v){var t=g(v.currentTarget),z=location.href,u=t.closest("form"),y=u.serialize(),A=location.search,x;if(A.length){x=z.replace(A,"?"+y)}else{x=z+"?"+y}if(history.pushState){history.pushState(null,null,x)}var w={pageUrl:x,task:"ordering"};g.wowmallWcProductsAjax(w)};function m(t){if(wowmallWcAjax.ajaxPagination){t.preventDefault();var u={pageUrl:t.currentTarget.href};g.wowmallWcProductsAjax(u)}}function p(u){u.preventDefault();var w=g(s),t=g(u.currentTarget),v={pageUrl:t.attr("href"),action:"wowmall_wc_load_more",productsCount:w.find(".product").length};t.addClass("loading");if(f&&f.readyState!==4){f.abort()}f=g.post(wowmallParams.ajax_url,v,function(x){t.removeClass("loading");if(x.success){var y=g(s);y.find(".product").last().after(x.data.products);t.replaceWith(x.data.button);g(document).trigger("wowmall_wc_products_changed");o()}})}function o(){n=g(a);n.off("click").on("click",h);g(r).off("change","select.orderby").on("change","select.orderby",g.wowmallWcOrderingHandler);g(e).off("click").on("click",m);g(c).off("click").on("click",p);j();k()}function k(){g(window).off("scroll",l);if(g(d).length){g(window).on("scroll",g.debounce(10,l))}}function l(){if(g(d).length&&(g(window).scrollTop()+g(window).height())>g(d).offset().top){var w=g(s),t=w.find(".product").length,u=g(d);var v={pageUrl:u.data("href"),action:"wowmall_wc_load_more",productsCount:t};if(f&&f.readyState!==4){return}f=g.post(wowmallParams.ajax_url,v,function(x){if(x.success){var y=g(s);y.find(".product").last().after(x.data.products);u.replaceWith(x.data.button);g(document).trigger("wowmall_wc_products_changed");o()}})}}function j(){g(".woocommerce-ordering select").selectmenu({appendTo:".woocommerce-ordering",width:254,change:function(t){g(t.target).change()}})}if("undefined"!==typeof wowmallParams){g(function(){o()})}if(g().select2){g("select[class*=dropdown_layered_nav]:not(.wowmall-color):not(.wowmall-size)").select2({minimumResultsForSearch:10})}else{if(g().selectmenu){g("select[class*=dropdown_layered_nav]:not(.wowmall-color):not(.wowmall-size)").selectmenu({width:"100%",create:function(t){g(t.target).selectmenu("option","appendTo","#"+g(t.target).closest(".widget").attr("id"))},change:function(t){g(t.target).change()}})}}})(jQuery);