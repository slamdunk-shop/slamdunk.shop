!function(i){"use strict";var e={mediaFrame:null,init:function(a,d){var n=d.find(".wowmall-admin-media-wrapper"),m=d.find(".wowmall-admin-media-add"),t=d.find(".wowmall-admin-media-image"),l=t.find(".dashicons-dismiss"),o=n.find("input[type=hidden]");m.on("click",function(i){e.openMedia(d)}),t.on("click",function(a){i(a.target)[0]===l[0]?(t.removeAttr("style").hide(),m.show(),o.val("").trigger("change")):e.openMedia(d)})},openMedia:function(i){if(e.mediaFrame)return void e.mediaFrame.open();e.mediaFrame=wp.media.frames.downloadable_file=wp.media({title:wowmallMediaTranslation.mediaFrameTitle,multiple:!1});var a=i.find(".wowmall-admin-media-wrapper"),d=i.find(".wowmall-admin-media-add"),n=i.find(".wowmall-admin-media-image"),m=(n.find(".dashicons-dismiss"),a.find("input[type=hidden]"));e.mediaFrame.on("select",function(){var i=e.mediaFrame.state().get("selection").first().toJSON();n.attr({style:"background-image: url("+i.sizes.thumbnail.url+");"}),d.hide(),m.val(i.id).trigger("change")}),e.mediaFrame.open()}};i("#widgets-right").find(".wowmall-admin-media-wrapper").closest("div.widget").each(function(){e.init("init",i(this))}),i(document).on("widget-updated widget-added",function(i,a){a.find(".wowmall-admin-media-wrapper")&&e.init(i,a)})}(jQuery);